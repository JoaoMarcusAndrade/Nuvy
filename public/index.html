<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nuvy</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous" />
  <!-- Fonte personalizada -->
  <link href="https://fonts.googleapis.com/css2?family=Bagel+Fat+One&display=swap" rel="stylesheet" />
  <!-- CSS customizado unificado -->
  <link rel="stylesheet" href="/css/style.css" />
  <!-- Adicionar o CSS do jogo -->
  <link rel="stylesheet" href="/css/Ztyle.css" />
  <link rel="manifest" href="/manifest.json">
</head>

<body>
  <!-- Parte de cima do site com links (s√≥ aparece na home) -->
  <header id="main-header">
    <a href="#ajuda">Ajuda</a>
    <a href="#contato">Contato</a>
  </header>

  <!-- √Årea principal da p√°gina inicial -->
  <div id="home" class="container section active">
    <img src="img/NuvyPet.png" alt="Nuvem" class="cloud" draggable="false" />
    <div class="text-box">
      <h1 class="NuvyH1">Nuvy</h1>
      <p class="NuvyP">
        Nosso programa de ensino mistura o brincar com o aprendizado, visando
        sempre o conforto do nosso p√∫blico.
      </p>
      <!-- Bot√£o para abrir o modal de login/cadastro -->
      <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
        Acessar
      </button>
    </div>
  </div>

  <!-- √Årea de Jogos (inicialmente oculta) -->
  <div id="jogos-section" class="section">
    <!-- Navbar para √°rea de jogos -->
    <nav class="navbar">
      <div class="navbar-left">
        <img src="img/NuvyPet.png" alt="Logo Nuvy" class="logo">
        <a href="#ajuda">Ajuda</a>
        <a href="#contato">Contato</a>
      </div>
      <div class="navbar-right">
        <img src="img/Login.png" width="55vh" alt="" style="margin-right: 30px;">
        <button id="logoutBtn" class="btn btn-outline-danger">Sair</button>
      </div>
    </nav>

    <!-- Conte√∫do educativo -->
    <section class="educativo">
      <h2>Conte√∫do educativo</h2>
      <div class="carrossel" id="youtube-cards">
      </div>
      <div class="barra"></div>
    </section>

    <!-- √Årea do jogo -->
    <section class="jogo">
      <h2>Divirta-se e aprenda</h2>
      <div id="game-container" class="jogo-box">
        <!-- O jogo ser√° carregado aqui dinamicamente -->
        <img src="img/controle.png" alt="Controle" class="game-icon">
        <p>Aguarde enquanto carregamos o jogo...</p>
      </div>
    </section>

    <!-- Footer -->
    <footer>
      <p>¬© todos os direitos reservados - 2025</p>
    </footer>
  </div>

  <!-- Modal -->
  <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content custom-modal">
        <div class="modal-header custom-modal-header">
          <button type="button" class="btn-close custom-btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">

          <!-- LOGIN USU√ÅRIO -->
          <div id="loginView">
            <h2 class="text-center mb-4">Login</h2>
            <form id="formLogin">
              <input id="inpgmailLogin" type="email" placeholder="Digite seu E-mail." required />
              <input id="inpsenhaLogin" type="password" placeholder="Digite sua senha." required />
              <button type="submit" class="btn-login">Entrar</button>
            </form>
            <p class="signup-text">
              N√£o tem uma conta?
              <a href="#" id="toCadastro">cadastre-se</a>
            </p>
            <p id="avisoLogin" class="text"></p>
          </div>

          <!-- LOGIN RESPONS√ÅVEL -->
          <div id="loginResponsavelView" style="display: none;">
            <h2 class="text-center mb-4">Login Respons√°vel</h2>
            <form id="formLoginResp">
              <input id="inpgmailLoginResp" type="email" placeholder="E-mail do Respons√°vel." required />
              <input id="inpsenhaLoginResp" type="password" placeholder="Digite sua senha." required />
              <button type="submit" class="btn-login">Entrar</button>
            </form>
            <p class="signup-text">
              N√£o tem uma conta?
              <a href="#" id="toCadastroResp">cadastre-se</a>
            </p>
            <p id="avisoLoginResp" class="text"></p>
            <p id="avisoLoginResp" class="text"></p>
          </div>

          <!-- CADASTRO USU√ÅRIO -->
          <div id="cadastroView" style="display:none;">
            <h2 class="text-center mb-4">Cadastro</h2>
            <form id="formCadastro">
              <input id="inpnome" type="text" maxlength="40" placeholder="Digite seu Nome" />
              <input id="inpgmailCadastro" type="email" maxlength="100" placeholder="Digite seu E-mail." required />
              <input id="inpsenhaCadastro" type="password" maxlength="30" placeholder="Digite sua senha." required />
              <input id="inpconfirmsenha" type="password" maxlength="30" placeholder="Confirme sua senha." required />
              <input id="inpidade" type="number" min="1" max="120" placeholder="Digite sua idade" required />
              <button type="submit" class="btn-login">Cadastrar</button>
            </form>
            <p class="signup-text">
              J√° tem uma conta?
              <a href="#" id="toLogin">voltar ao login</a>
            </p>
            <p id="avisoCadastro" class="text"></p>
          </div>

          <!-- CADASTRO RESPONS√ÅVEL -->
          <div id="cadastroResponsavelView" style="display: none;">
            <h2 class="text-center mb-4">Cadastro Respons√°vel</h2>
            <form id="formCadastroResp"><input id="inpgmailCadastroResp" type="email" maxlength="100"
                placeholder="E-mail do Respons√°vel." required />
              <input id="inpsenhaCadastroResp" type="password" maxlength="30" placeholder="Digite sua senha."
                required />
              <input id="inpconfirmsenhaResp" type="password" maxlength="30" placeholder="Confirme sua senha."
                required />
              <button type="submit" class="btn-login">Cadastrar</button>
            </form>
            <p class="signup-text">
              J√° tem uma conta?
              <a href="#" id="toLoginResp">voltar ao login</a>
            </p>
            <p id="avisoCadastroResp" class="text"></p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <!-- PopperJS para Bootstrap -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
    crossorigin="anonymous"></script>
  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.min.js" crossorigin="anonymous"></script>
  <!-- API youtube -->
  <script>
    const API_KEY = "AIzaSyBxtBtd9sz9cgafxGT1zkPMb4lHXmGxsLU"
    async function carregarVideos(termo = "jogos educativos") {
      const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(termo)}&type=video&maxResults=6&key=${API_KEY}`;

      const resposta = await fetch(url);
      const dados = await resposta.json();

      const container = document.getElementById("youtube-cards");
      container.innerHTML = ""; // limpa antes de inserir novos cards

      dados.items.forEach(item => {
        const videoId = item.id.videoId;
        const titulo = item.snippet.title;
        const thumb = item.snippet.thumbnails.medium.url;

        // card HTML
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
          <a href="https://www.youtube.com/watch?v=${videoId}" target="_blank">
          <img src="${thumb}" alt="${titulo}" />
          <p>${titulo}</p>
          </a>
        `;
        container.appendChild(card);
      });
    }

    // Carregar v√≠deos ao abrir a p√°gina
    carregarVideos();
  </script>
  <!-- ROTAS E ETC... -->
  <script src="js/main.js"></script>
  
  <!-- Script do jogo Nuvy -->
  <script>
    // Fun√ß√£o para carregar o jogo quando a se√ß√£o de jogos for acessada
    function loadNuvyGame() {
      const gameContainer = document.getElementById('game-container');
      gameContainer.innerHTML = ''; // Limpa o conte√∫do anterior
      
      // Criar elementos do jogo Nuvy
      const gameWrapper = document.createElement('div');
      gameWrapper.id = 'nuvy-game-wrapper';
      gameWrapper.style.width = '100%';
      gameWrapper.style.height = '100%';
      gameWrapper.style.minHeight = '500px';
      
      // Criar nuvens decorativas
      const cloud1 = document.createElement('div');
      cloud1.className = 'cloud cloud-1';
      
      const cloud2 = document.createElement('div');
      cloud2.className = 'cloud cloud-2';
      
      const cloud3 = document.createElement('div');
      cloud3.className = 'cloud cloud-3';
      
      // Criar container principal do jogo
      const container = document.createElement('div');
      container.className = 'container';
      
      // Criar cabe√ßalho do jogo
      const header = document.createElement('div');
      header.className = 'header';
      
      const title = document.createElement('div');
      title.className = 'title';
      title.innerHTML = 'N√≠vel <span id="current-level">1</span>';
      
      const infoContainer = document.createElement('div');
      infoContainer.className = 'info-container';
      
      const xpContainer = document.createElement('div');
      xpContainer.className = 'xp-container';
      
      const xpText = document.createElement('span');
      xpText.className = 'xp-text';
      xpText.textContent = 'XP: 0/500';
      
      const xpBar = document.createElement('div');
      xpBar.className = 'xp-bar';
      
      const xpProgress = document.createElement('div');
      xpProgress.className = 'xp-progress';
      
      xpBar.appendChild(xpProgress);
      xpContainer.appendChild(xpText);
      xpContainer.appendChild(xpBar);
      
      const timer = document.createElement('div');
      timer.className = 'timer';
      timer.textContent = 'Tempo: 05:00';
      
      infoContainer.appendChild(xpContainer);
      infoContainer.appendChild(timer);
      
      header.appendChild(title);
      header.appendChild(infoContainer);
      
      // Criar instru√ß√µes
      const instructions = document.createElement('div');
      instructions.className = 'instructions';
      
      const instructionsText = document.createElement('div');
      instructionsText.className = 'instructions-text';
      instructionsText.textContent = 'Arraste as coisas para a nuvem correta!';
      
      instructions.appendChild(instructionsText);
      
      // Criar √°rea de jogo
      const gameArea = document.createElement('div');
      gameArea.className = 'game-area';
      
      const targetsContainer = document.createElement('div');
      targetsContainer.className = 'targets-container';
      
      const draggablesContainer = document.createElement('div');
      draggablesContainer.className = 'draggables-container';
      
      gameArea.appendChild(targetsContainer);
      gameArea.appendChild(draggablesContainer);
      
      container.appendChild(header);
      container.appendChild(instructions);
      container.appendChild(gameArea);
      
      // Adicionar elementos ao wrapper
      gameWrapper.appendChild(cloud1);
      gameWrapper.appendChild(cloud2);
      gameWrapper.appendChild(cloud3);
      gameWrapper.appendChild(container);
      
      // Adicionar modais do jogo
      const infoModal = document.createElement('div');
      infoModal.className = 'modal';
      infoModal.id = 'info-modal';
      infoModal.style.display = 'none';
      
      const modalContent = document.createElement('div');
      modalContent.className = 'modal-content';
      
      const modalTitle = document.createElement('h2');
      modalTitle.className = 'modal-title';
      modalTitle.textContent = 'Nuvem da Internet';
      
      const modalDescription = document.createElement('p');
      modalDescription.className = 'modal-description';
      modalDescription.innerHTML = 'A nuvem da internet √© como uma caixinha m√°gica que guarda nossas coisas!<br><br>Ela guarda:<br>üì∏ Nossas fotos e v√≠deos<br>üéµ Nossas m√∫sicas favoritas<br>üéÆ Nossos joguinhos divertidos<br>üé® Nossos desenhos coloridos<br><br>Assim podemos acess√°-las de qualquer lugar!';
      
      const modalButton = document.createElement('button');
      modalButton.className = 'modal-button';
      modalButton.id = 'close-modal';
      modalButton.textContent = 'Entendi!';
      
      modalContent.appendChild(modalTitle);
      modalContent.appendChild(modalDescription);
      modalContent.appendChild(modalButton);
      infoModal.appendChild(modalContent);
      
      const levelCompleteModal = document.createElement('div');
      levelCompleteModal.className = 'modal';
      levelCompleteModal.id = 'level-complete-modal';
      levelCompleteModal.style.display = 'none';
      
      const levelModalContent = document.createElement('div');
      levelModalContent.className = 'modal-content';
      
      const levelModalTitle = document.createElement('h2');
      levelModalTitle.className = 'modal-title';
      levelModalTitle.textContent = 'Parab√©ns!';
      
      const levelModalDescription = document.createElement('p');
      levelModalDescription.className = 'modal-description';
      levelModalDescription.id = 'level-complete-message';
      levelModalDescription.textContent = 'Voc√™ completou o n√≠vel 1!';
      
      const nextLevelButton = document.createElement('button');
      nextLevelButton.className = 'modal-button';
      nextLevelButton.id = 'next-level-btn';
      nextLevelButton.textContent = 'Pr√≥ximo N√≠vel';
      
      levelModalContent.appendChild(levelModalTitle);
      levelModalContent.appendChild(levelModalDescription);
      levelModalContent.appendChild(nextLevelButton);
      levelCompleteModal.appendChild(levelModalContent);
      
      // Adicionar feedback e bot√µes de a√ß√£o
      const feedback = document.createElement('div');
      feedback.className = 'feedback';
      feedback.id = 'feedback';
      
      const infoButton = document.createElement('button');
      infoButton.className = 'action-button info-button';
      infoButton.id = 'info-btn';
      infoButton.setAttribute('aria-label', 'Informa√ß√µes');
      infoButton.textContent = '?';
      
      const restartButton = document.createElement('button');
      restartButton.className = 'action-button restart-button';
      restartButton.id = 'restart-btn';
      restartButton.textContent = 'Jogar Novamente';
      restartButton.style.display = 'none';
      
      const musicButton = document.createElement('button');
      musicButton.className = 'action-button music-button';
      musicButton.id = 'music-btn';
      musicButton.setAttribute('aria-label', 'Controle de m√∫sica');
      musicButton.textContent = 'üîä';
      
      // Adicionar elementos de √°udio
      const pickupSound = document.createElement('audio');
      pickupSound.id = 'pickup-sound';
      pickupSound.src = 'som1.wav';
      pickupSound.preload = 'auto';
      
      const dropSound = document.createElement('audio');
      dropSound.id = 'drop-sound';
      dropSound.src = 'som2.wav';
      dropSound.preload = 'auto';
      
      const infoSound = document.createElement('audio');
      infoSound.id = 'info-sound';
      infoSound.src = 'som4.mp3';
      infoSound.preload = 'auto';
      
      // Adicionar todos os elementos ao wrapper
      gameWrapper.appendChild(infoModal);
      gameWrapper.appendChild(levelCompleteModal);
      gameWrapper.appendChild(feedback);
      gameWrapper.appendChild(infoButton);
      gameWrapper.appendChild(restartButton);
      gameWrapper.appendChild(musicButton);
      gameWrapper.appendChild(pickupSound);
      gameWrapper.appendChild(dropSound);
      gameWrapper.appendChild(infoSound);
      
      // Adicionar o jogo ao container
      gameContainer.appendChild(gameWrapper);
      
      // Carregar o script do jogo
      const script = document.createElement('script');
      script.src = '/js/Game.js';
      document.body.appendChild(script);
      
      // Inicializar o jogo ap√≥s o carregamento
      script.onload = function() {
        if (typeof initGame === 'function') {
          initGame();
        }
      };
    }
    
    // Carregar o jogo quando a se√ß√£o de jogos for ativada
    document.addEventListener('DOMContentLoaded', function() {
      // Observar mudan√ßas na se√ß√£o ativa
      const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
          if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
            const jogosSection = document.getElementById('jogos-section');
            if (jogosSection.classList.contains('active')) {
              // Carregar o jogo apenas se ainda n√£o foi carregado
              if (!document.getElementById('nuvy-game-wrapper')) {
                loadNuvyGame();
              }
            }
          }
        });
      });
      
      // Observar mudan√ßas na classe da se√ß√£o de jogos
      const jogosSection = document.getElementById('jogos-section');
      observer.observe(jogosSection, { attributes: true });
    });
  </script>
</body>

</html>